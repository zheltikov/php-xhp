#!/usr/bin/env php
<?php

require_once(__DIR__ . '/../vendor/autoload.php');

$namespace = ''; // '\\Zheltikov\\PhpXhp\\Html\\Tags\\';
$tags_path = __DIR__ . '/../src/Html/Tags/';
$files = scandir($tags_path);

$tag_map = [];
foreach ($files as $file) {
    if ($file === '.' || $file === '..') {
        continue;
    }

    $class_name = basename($file, '.php');
    $tag_name = strtolower(ltrim($class_name, '_'));
    $tag_map[$tag_name] = $namespace . $class_name;
}

ksort($tag_map);

echo <<<PHP
<?php

/** @generated by ./regenerate-tag-map.php */

namespace Zheltikov\PhpXhp\Html\Tags;

class TagMap
{
    /**
     * @return array
     */
    public static function getTagMap(): array
    {
        return [

PHP;

foreach ($tag_map as $tag_name => $class_name) {
    echo str_repeat('    ', 3);
    var_export($tag_name);
    echo ' => ';
    echo $class_name . '::class,';
    echo "\n";
}

echo <<<PHP
        ];
    }
}


PHP;
